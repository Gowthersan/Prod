<div class="min-h-screen grid place-items-center bg-white px-3 sm:px-4 md:px-6 py-4 sm:py-6">
  <div class="w-full max-w-[95vw] sm:max-w-md md:max-w-lg lg:max-w-xl rounded-xl sm:rounded-2xl bg-white text-[#0B1F2C] p-4 sm:p-6 md:p-8 shadow-xl sm:shadow-2xl border border-slate-200">
    <div class="h-1 w-full bg-green-400 rounded mb-4 sm:mb-6"></div>

    <div class="flex items-center justify-between text-xs sm:text-sm">
      <span></span>
      <a routerLink="/register" class="text-slate-500 hover:text-slate-700 transition-colors">Retour</a>
    </div>

    <h2 class="mt-2 text-xl sm:text-2xl md:text-3xl font-bold">Entrez le code OTP</h2>
    <p class="mt-1 text-sm sm:text-base text-slate-500 break-words">
      Un code à 6 chiffres a été envoyé à <b class="break-all">{{ email() || 'votre email' }}</b>.
    </p>

    <!-- Afficher les erreurs -->
    <div *ngIf="error()" class="mt-3 sm:mt-4 rounded-md border border-red-300 bg-red-50 text-red-700 px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base">
      {{ error() }}
    </div>

    <!-- Afficher les messages de succès -->
    <div *ngIf="success()" class="mt-3 sm:mt-4 rounded-md border border-green-300 bg-green-50 text-green-700 px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base">
      {{ success() }}
    </div>

    <!-- Inputs OTP -->
    <div class="mt-4 sm:mt-6 flex items-center justify-center gap-1.5 xs:gap-2 sm:gap-3">
      <input
        #otpInput
        type="text"
        inputmode="numeric"
        maxlength="1"
        (input)="onInput(0, $event)"
        (keydown)="onKeyDown(0, $event)"
        [class.border-red-400]="error()"
        class="w-10 h-10 xs:w-11 xs:h-11 sm:w-12 sm:h-12 md:w-14 md:h-14 text-center border-2 rounded-md text-base sm:text-lg md:text-xl font-bold focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200 transition"
      />
      <input
        #otpInput
        type="text"
        inputmode="numeric"
        maxlength="1"
        (input)="onInput(1, $event)"
        (keydown)="onKeyDown(1, $event)"
        [class.border-red-400]="error()"
        class="w-10 h-10 xs:w-11 xs:h-11 sm:w-12 sm:h-12 md:w-14 md:h-14 text-center border-2 rounded-md text-base sm:text-lg md:text-xl font-bold focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200 transition"
      />
      <input
        #otpInput
        type="text"
        inputmode="numeric"
        maxlength="1"
        (input)="onInput(2, $event)"
        (keydown)="onKeyDown(2, $event)"
        [class.border-red-400]="error()"
        class="w-10 h-10 xs:w-11 xs:h-11 sm:w-12 sm:h-12 md:w-14 md:h-14 text-center border-2 rounded-md text-base sm:text-lg md:text-xl font-bold focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200 transition"
      />
      <input
        #otpInput
        type="text"
        inputmode="numeric"
        maxlength="1"
        (input)="onInput(3, $event)"
        (keydown)="onKeyDown(3, $event)"
        [class.border-red-400]="error()"
        class="w-10 h-10 xs:w-11 xs:h-11 sm:w-12 sm:h-12 md:w-14 md:h-14 text-center border-2 rounded-md text-base sm:text-lg md:text-xl font-bold focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200 transition"
      />
      <input
        #otpInput
        type="text"
        inputmode="numeric"
        maxlength="1"
        (input)="onInput(4, $event)"
        (keydown)="onKeyDown(4, $event)"
        [class.border-red-400]="error()"
        class="w-10 h-10 xs:w-11 xs:h-11 sm:w-12 sm:h-12 md:w-14 md:h-14 text-center border-2 rounded-md text-base sm:text-lg md:text-xl font-bold focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200 transition"
      />
      <input
        #otpInput
        type="text"
        inputmode="numeric"
        maxlength="1"
        (input)="onInput(5, $event)"
        (keydown)="onKeyDown(5, $event)"
        [class.border-red-400]="error()"
        class="w-10 h-10 xs:w-11 xs:h-11 sm:w-12 sm:h-12 md:w-14 md:h-14 text-center border-2 rounded-md text-base sm:text-lg md:text-xl font-bold focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200 transition"
      />
    </div>

    <!-- Message d'aide -->
    <p class="mt-3 sm:mt-4 text-center text-xs sm:text-sm text-slate-500">
      Vous n'avez pas reçu le code ?
    </p>

    <!-- Actions -->
    <div class="mt-3 sm:mt-4 flex flex-col sm:flex-row items-stretch sm:items-center justify-center gap-2 sm:gap-3">
      <button
        type="button"
        (click)="resend()"
        [disabled]="counter() > 0"
        class="w-full sm:w-auto rounded-md border border-slate-300 hover:border-slate-400 px-3 sm:px-4 py-2 text-sm sm:text-base font-medium disabled:opacity-50 disabled:cursor-not-allowed transition"
      >
        Renvoyer
        <span *ngIf="counter() > 0" class="ml-1 text-slate-500">({{ counter() }}s)</span>
      </button>
      <button
        type="button"
        (click)="verify()"
        [disabled]="digits().join('').length !== 6"
        class="w-full sm:w-auto rounded-md bg-green-500 hover:bg-green-600 text-white px-4 sm:px-6 py-2 text-sm sm:text-base font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition"
      >
        Vérifier & continuer
      </button>
    </div>
  </div>
</div>

